import batchspawner


spawner = batchspawner.SlurmSpawner()
spawner.batch_submit_cmd = 'sbatch'
spawner.job_name = '--job-name='  ## TODO: ?
spawner.batch_query_user_cmd = 'squeue --user='
spawner.batch_cancel_cmd = 'scancel '
spawner.req_nprocs = '1'  ## NODES_SERVER / SIMU
spawner.req_ntasks_per_node = '1'  ## PROC_PER_NODE
spawner.req_memory = '0'
spawner.req_runtime = '0:10:00'  # WALLTIME_SERVER / SIMU
spawner.req_output_log = 'melissa.%j.log'
spawner.req_error_log = 'melissa.%j.err'


## replacing spawner.batch_script
spawner.batch_script = '''#!/bin/bash
#SBATCH -N {nprocs}
#SBATCH --ntasks-per-node={ntasks_per_node}  ## TODO: not implemented
#SBATCH --mem={memory}
#SBATCH --time={runtime}
#SBATCH -o {output_log}
#SBATCH -e {error_log}
#SBATCH --job-name=Melissa
'''

spawner.simu_script = '''#!/bin/bash
#SBATCH -N {nnprocs}
#SBATCH --ntasks-per-node={ntasks_per_node}
#SBATCH --time={runtime}
#SBATCH -o simu.%j.log
#SBATCH -e simu.%j.err
'''
